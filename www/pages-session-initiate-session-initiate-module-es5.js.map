{"version":3,"sources":["webpack:///src/app/pages/session-initiate/session-initiate.page.html","webpack:///src/app/pages/session-initiate/session-initiate-routing.module.ts","webpack:///src/app/pages/session-initiate/session-initiate.module.ts","webpack:///src/app/pages/session-initiate/session-initiate.page.scss","webpack:///src/app/pages/session-initiate/session-initiate.page.ts"],"names":["routes","path","component","SessionInitiatePageRoutingModule","imports","forChild","exports","SessionInitiatePageModule","declarations","SessionInitiatePage","imageCompress","platform","camera","assignmentsService","dms","base64","formBuilder","storage","router","networkService","nativeHttp","globalService","showtextarea","imagevalid","initiatesessionForm","group","assignmenttitle","required","assignmenttext","backButton","subscribeWithPriority","console","log","navigateByUrl","token","getselectedtoken","studentid","getselectedStudentId","event","sourceType","options","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","getPicture","then","imageData","assignmentimage","imgdisplayinapp","display","sizeOfOriginalImage","byteCount","err","bImg","bypassSecurityTrustUrl","pickImage","PictureSourceType","CAMERA","PHOTOLIBRARY","target","complete","online","presentNetworkMsg","valid","undefined","PostSession","presentToastWithOptions","presentLoading","setDataSerializer","post","apiUrl","response","reset","data","JSON","parse","set","assignments","session_id","session_Id","setselectedsessionid","setselectedinitiatorid","dismissLoading","presentInitiateSession","res","missingtitle","e","presentError","setTimeout","status","error","selector","template"],"mappings":"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","file":"pages-session-initiate-session-initiate-module-es5.js","sourcesContent":["export default \"<app-main-header></app-main-header>\\r\\n<ion-content>\\r\\n  <ion-refresher slot='fixed' (ionRefresh)='UpdateData($event)'>\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n    </ion-refresher>\\r\\n  <div class=\\\"secondcontent\\\">\\r\\n  <ul class=\\\"breadcrumb\\\" id=\\\"breadcrumbs\\\">\\r\\n    <li style=\\\"display: inline;\\\"><a href=\\\"/tabs/main\\\"> Home </a><i class=\\\"ion-chevron-right\\\"></i></li>\\r\\n    <li style=\\\"display: inline;\\\" class=\\\"active\\\"> Request Tuition </li>\\r\\n  </ul>    \\r\\n    <form [formGroup]=\\\"initiatesessionForm\\\">\\r\\n    <ion-item>\\r\\n    <ion-label position=\\\"floating\\\" style=\\\"color:#1c91a8;\\\">Title<b style=\\\"color:red;\\\">*</b></ion-label>\\r\\n    <ion-input formControlName=\\\"assignmenttitle\\\" [(ngModel)]=\\\"assignmenttitle\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-label position=\\\"floating\\\" style=\\\"color:#1c91a8;margin-left: 1em;\\\">Question<b style=\\\"color:red;\\\">*</b></ion-label>\\r\\n  <ion-item lines=\\\"none\\\" *ngIf=\\\"imagevalid\\\">\\r\\n    <div style=\\\" width:auto;margin:0 auto;display:block;float:none;max-width:100%; \\\">\\r\\n  <img [src]=\\\"imgdisplayinapp\\\" > \\r\\n</div>\\r\\n</ion-item>\\r\\n  <ion-item>\\r\\n      <ion-textarea formControlName=\\\"assignmenttext\\\" *ngIf=\\\"showtextarea\\\" [(ngModel)]=\\\"assignmenttext\\\"></ion-textarea>\\r\\n    </ion-item>\\r\\n<ion-col>\\r\\n  <div class=\\\"content\\\">\\r\\n    <span><ion-icon button (click)=\\\"selecttext($event)\\\" src=\\\"assets/images/045-text.svg\\\"></ion-icon></span>\\r\\n    <span><ion-icon button (click)=\\\"selectImageGallery()\\\" src=\\\"assets/images/attachment.svg\\\"></ion-icon></span>\\r\\n    <span><ion-icon button (click)=\\\"selectImageCamera()\\\" src=\\\"assets/images/005-camera.svg\\\"></ion-icon></span>\\r\\n  </div>\\r\\n</ion-col>\\r\\n</form>\\r\\n<ion-col>\\r\\n  <ion-button expand='full' (click)=\\\"UploadAssignment()\\\" style=\\\"color:#ffffff;\\\">Submit</ion-button>\\r\\n</ion-col>\\r\\n</div>\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SessionInitiatePage } from './session-initiate.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SessionInitiatePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SessionInitiatePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SessionInitiatePageRoutingModule } from './session-initiate-routing.module';\r\n\r\nimport { SessionInitiatePage } from './session-initiate.page';\r\n\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport {ComponentsModule} from '../../components.module';\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    SessionInitiatePageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [SessionInitiatePage]\r\n})\r\nexport class SessionInitiatePageModule {}\r\n","export default \"ion-item {\\n  border: none;\\n}\\n\\n.content {\\n  display: flex;\\n  max-width: 400em;\\n  margin: 0 auto;\\n  background: transparent;\\n  padding-left: 2em;\\n}\\n\\nspan {\\n  zoom: 2;\\n  padding: 0.1em;\\n}\\n\\nion-icon {\\n  background-color: transparent;\\n}\\n\\nion-icon:hover {\\n  background-color: #b9b9b9;\\n  border: #b9b9b9 solid 0.1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2Vzc2lvbi1pbml0aWF0ZS9DOlxcVXNlcnNcXERhbmFlXFxEZXNrdG9wXFxGWVBKXFxTTFAtUy0tQS9zcmNcXGFwcFxccGFnZXNcXHNlc3Npb24taW5pdGlhdGVcXHNlc3Npb24taW5pdGlhdGUucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZXNzaW9uLWluaXRpYXRlL3Nlc3Npb24taW5pdGlhdGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBQTtBQ0NGOztBRENBO0VBQ0UsYUFBQTtFQUNBLGdCQUFBO0VBQ0EsY0FBQTtFQUNBLHVCQUFBO0VBQ0EsaUJBQUE7QUNFRjs7QURBQTtFQUNFLE9BQUE7RUFDQSxjQUFBO0FDR0Y7O0FEREE7RUFDRSw2QkFBQTtBQ0lGOztBREZBO0VBQ0UseUJBQUE7RUFDQSwyQkFBQTtBQ0tGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc2Vzc2lvbi1pbml0aWF0ZS9zZXNzaW9uLWluaXRpYXRlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pdGVtIHtcclxuICBib3JkZXI6bm9uZTtcclxufVxyXG4uY29udGVudCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBtYXgtd2lkdGg6IDQwMGVtO1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIGJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7XHJcbiAgcGFkZGluZy1sZWZ0OjJlbTtcclxufVxyXG5zcGFuIHtcclxuICB6b29tOjI7XHJcbiAgcGFkZGluZzogMC4xZW07XHJcbn1cclxuaW9uLWljb24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7XHJcbn1cclxuaW9uLWljb246aG92ZXJ7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2I5YjliOTtcclxuICBib3JkZXI6I2I5YjliOSBzb2xpZCAwLjFlbTtcclxufVxyXG4iLCJpb24taXRlbSB7XG4gIGJvcmRlcjogbm9uZTtcbn1cblxuLmNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXgtd2lkdGg6IDQwMGVtO1xuICBtYXJnaW46IDAgYXV0bztcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIHBhZGRpbmctbGVmdDogMmVtO1xufVxuXG5zcGFuIHtcbiAgem9vbTogMjtcbiAgcGFkZGluZzogMC4xZW07XG59XG5cbmlvbi1pY29uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbmlvbi1pY29uOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2I5YjliOTtcbiAgYm9yZGVyOiAjYjliOWI5IHNvbGlkIDAuMWVtO1xufSJdfQ== */\";","import { Component, OnInit  } from '@angular/core';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\r\nimport { Base64 } from '@ionic-native/base64/ngx';\r\nimport {Router} from '@angular/router';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport {Storage} from '@ionic/storage';\r\nimport { AssignmentsService } from '../../services/assignments.service';\r\nimport {NetworkService} from '../../services/network.service';\r\nimport { HTTP } from '@ionic-native/http/ngx';\r\nimport {apiurl} from '../../model/global-api';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { GlobalService} from '../../services/global.service';\r\nimport { NgxImageCompressService } from 'ngx-image-compress';\r\nimport { Platform } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-session-initiate',\r\n  templateUrl: './session-initiate.page.html',\r\n  styleUrls: ['./session-initiate.page.scss'],\r\n})\r\nexport class SessionInitiatePage implements OnInit {\r\n\r\n  constructor(private imageCompress: NgxImageCompressService,private platform: Platform,private camera: Camera, private assignmentsService: AssignmentsService,public dms:DomSanitizer,public base64:Base64,public formBuilder: FormBuilder,private storage:Storage,private router:Router,private networkService:NetworkService,private nativeHttp:HTTP,private globalService: GlobalService) {\r\n    this.initiatesessionForm = formBuilder.group({\r\n      assignmenttitle: ['', Validators.required],\r\n      assignmenttext: ['']\r\n  });\r\n    }\r\n  //Form\r\n  public initiatesessionForm: FormGroup; assignmenttitle:any; assignmenttext:any;assignmentimage: any;session_id:any;\r\n  public showtextarea=false; public imagevalid=false;imgdisplayinapp:any;\r\n  //User Info\r\n  token:any;studentid:any;\r\n\r\n  //Image compress\r\nimgResultBeforeCompress:string;\r\nimgResultAfterCompress:string;\r\nlocalUrl: any;\r\nlocalCompressedURl:any;\r\nsizeOfOriginalImage:number;\r\nsizeOFCompressedImage:number;\r\nngOnInit(){}\r\nionViewDidEnter(){\r\n  this.platform.backButton.subscribeWithPriority(10, () => {\r\n    console.log('Handler was called!');\r\n    this.router.navigateByUrl('tabs/main')\r\n  });\r\n}\r\nionViewWillEnter()\r\n{\r\n  this.token=this.globalService.getselectedtoken()\r\n  this.studentid=this.globalService.getselectedStudentId()\r\n}\r\n/*text*/\r\nselecttext(event:Event){\r\n  this.showtextarea=!this.showtextarea;\r\n}\r\n/*Camera & Gallery*/\r\npickImage(sourceType) {\r\n  const options: CameraOptions = {\r\n    quality: 50,\r\n    sourceType: sourceType,\r\n    destinationType: this.camera.DestinationType.DATA_URL,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n  }\r\n  this.camera.getPicture(options).then((imageData) => {\r\n    // imageData is either a base64 encoded string or a file URI\r\n    // If it's base64 (DATA_URL):\r\n    this.assignmentimage = imageData;\r\n    this.imgdisplayinapp=this.display(this.assignmentimage)\r\n   this.imagevalid=true;\r\n\r\n   //count byte (purpose)\r\n   this.sizeOfOriginalImage = this.imageCompress.byteCount(this.imgdisplayinapp)/(1024*1024);   \r\n  }, (err) => {\r\n    // Handle error\r\n  });\r\n}\r\n\r\n//Image Sanitize\r\ndisplay(bImg:string)\r\n{\r\n  return this.dms.bypassSecurityTrustUrl(\"data:image/jpeg;base64, \"+bImg)\r\n}\r\nasync selectImageCamera(){\r\n  this.pickImage(this.camera.PictureSourceType.CAMERA);\r\n}\r\nasync selectImageGallery(){\r\n  this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY);\r\n}\r\n\r\nUpdateData(event){\r\n  console.log( 'this is the text and title',this.assignmenttext, this.assignmenttitle)\r\n  event.target.complete()\r\n}\r\n\r\n/*Upload */\r\nUploadAssignment()\r\n{\r\n  if(this.networkService.online == false )\r\n  {\r\n    this.networkService.presentNetworkMsg(); \r\n  }\r\n  if(this.initiatesessionForm.valid)\r\n  {\r\n    if(this.assignmenttext != undefined && this.assignmenttext != \"\")\r\n    {\r\n      this.PostSession();\r\n      // console.log('check check it works')\r\n    }else\r\n    {\r\n     this.assignmentsService.presentToastWithOptions(\"Text in the question field is compulsory\"); \r\n    }\r\n  }\r\n    else\r\n    {\r\n     this.assignmentsService.presentToastWithOptions(\"Please ensure all required details are filled up\"); \r\n    }\r\n}\r\n /*POST METHOD*/\r\n PostSession()\r\n {\r\n  this.assignmentsService.presentLoading()\r\n  this.nativeHttp.setDataSerializer('json');\r\n // console.log(this.studentid)\r\n  //console.log(this.token)\r\n   this.nativeHttp.post(apiurl.apiUrl+'session/requestTuition', {\r\n    \"Authentication_Token\":this.token, //Get from storage \r\n    \"Student_Id\":this.studentid, //Get from storage  \r\n    \"Session_Title\": this.assignmenttitle,\r\n    \"Session_Question_Text\": this.assignmenttext,\r\n    \"Session_Question_Data\": this.assignmentimage,\r\n}, {\r\n  'Accept': 'application/json',\r\n  'Content-Type': 'application/json' })\r\n  .then(response => {\r\n  this.initiatesessionForm.reset() //Reset Form\r\n   this.imagevalid=false; //Clear Image\r\n  // console.log(response)\r\n    try {\r\n      //console.log(response.data)\r\n      response.data = JSON.parse(response.data);\r\n      this.storage.set('mysession', response.data); \r\n      this.storage.set('assignmentdetails',response.data.assignments);\r\n      this.session_id=response.data.session_Id;\r\n      this.assignmentsService.setselectedsessionid(this.session_id)\r\n      this.assignmentsService.setselectedinitiatorid(this.studentid)\r\n      this.assignmentsService.dismissLoading()\r\n      this.assignmentsService.presentInitiateSession('Ok').then((res) => {\r\n       if (res === 'Ok') {\r\n        this.router.navigateByUrl('tabs/session-view/session-view/'+this.session_id);\r\n       }else{\r\n         this.assignmentsService.missingtitle() \r\n       }\r\n      });\r\n    } catch(e) {\r\n      this.assignmentsService.presentError()\r\n\r\n      setTimeout(() => {\r\n        this.assignmentsService.dismissLoading()\r\n        this.router.navigateByUrl('tabs/main');  \r\n\r\n      }, 3000);\r\n    }\r\n })\r\n .catch(response => {\r\n  console.log(response.status);\r\n  console.log(response.error);\r\n  this.assignmentsService.presentError()\r\n\r\n  setTimeout(() => {\r\n    this.assignmentsService.dismissLoading()\r\n    this.router.navigateByUrl('tabs/main');  \r\n\r\n  }, 3000);\r\n });\r\n }\r\n \r\n}\r\n"]}