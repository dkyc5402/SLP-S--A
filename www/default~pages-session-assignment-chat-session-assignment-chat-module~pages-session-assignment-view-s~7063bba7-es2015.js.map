{"version":3,"sources":["./src/app/pages/session-assignment-chat/session-assignment-chat.page.html","./src/app/pages/session-assignment-chat/session-assignment-chat.page.scss","./src/app/pages/session-assignment-chat/session-assignment-chat.page.ts","./src/app/services/chat.service.ts"],"names":[],"mappings":"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","file":"default~pages-session-assignment-chat-session-assignment-chat-module~pages-session-assignment-view-s~7063bba7-es2015.js","sourcesContent":["export default \"<ion-header *ngIf=\\\"this.sessionstatus!==this.sessionstatusended\\\" style=\\\"padding:3%;background-color:#274c9c;\\\">\\r\\n  <ion-title style=\\\"text-align: center;color:white;display:inline-flexbox;\\\" ><b>Instant Messaging</b><img (click)=\\\"DismissModal()\\\" style=\\\"width: 1.2em;position:absolute;right:0;\\\" src=\\\"assets/images/criss-cross_grayblue.png\\\"></ion-title>\\r\\n  </ion-header>\\r\\n  <!--Read-->\\r\\n  <ion-header *ngIf=\\\"this.sessionstatus===this.sessionstatusended\\\" style=\\\"padding:3%;background-color:#b2b2b2;\\\">\\r\\n    <ion-title style=\\\"text-align: center;color:#808080;display:inline-flexbox;\\\" ><b>Instant Messaging</b><img (click)=\\\"DismissModal()\\\" style=\\\"width: 1.2em;position:absolute;right:0;\\\" src=\\\"assets/images/criss-cross_grayblue.png\\\"></ion-title>\\r\\n    </ion-header>\\r\\n<ion-content #content overflow-scroll=\\\"true\\\">\\r\\n<div class=\\\"thirdcontent\\\" *ngFor=\\\"let chat of chatIRecived\\\">\\r\\n<ion-row >\\r\\n  <ion-col *ngIf=\\\"chat.sender_Id!=this.studentid\\\" size=\\\"9\\\"  class=\\\"message other-message\\\">\\r\\n    <b>{{chat.sender_Username}} to {{chat.recipient_Username}}:</b><br>\\r\\n    <span>{{chat.chat_Value}}</span>\\r\\n    <div class=\\\"time\\\" text-right><br>\\r\\n      <ion-label> {{chat.created_On| date:'medium'}}</ion-label>\\r\\n    </div>\\r\\n  </ion-col>\\r\\n  </ion-row>\\r\\n  <ion-row>\\r\\n    <ion-col offset=\\\"3\\\" *ngIf=\\\"chat.sender_Id==this.studentid\\\"  size=\\\"9\\\" class=\\\"message my-message\\\">\\r\\n      <b>{{chat.sender_Username}} to {{chat.recipient_Username}}:</b><br>\\r\\n      <span>{{chat.chat_Value}}</span>\\r\\n      <div class=\\\"time\\\" text-right><br>\\r\\n        <ion-label> {{chat.created_On| date:'medium'}}</ion-label>\\r\\n        <!-- <ion-datetime value=\\\"{{chat.created_On}}\\\" displayFormat=\\\"D MMM YYYY, H:mm\\\" display-timezone=\\\"utc\\\"></ion-datetime>    -->\\r\\n      </div>\\r\\n    </ion-col>\\r\\n    </ion-row>\\r\\n    \\r\\n    \\r\\n</div>\\r\\n</ion-content>\\r\\n<!--No Read-->\\r\\n<ion-footer>\\r\\n<ion-toolbar >\\r\\n  <form [formGroup]=\\\"createchatForm\\\" *ngIf=\\\"this.sessionstatus!==this.sessionstatusended\\\">\\r\\n<ion-row>  \\r\\n  <ion-col size=\\\"2\\\" class=\\\"ion-align-self-center\\\">\\r\\n  <ion-text>To:</ion-text>\\r\\n  </ion-col>\\r\\n      <ion-col offset=\\\"-1\\\" size=\\\"5\\\">\\r\\n      <ion-select [(ngModel)]=\\\"recipientname\\\"  formControlName=\\\"recipientname\\\" style=\\\"background-color: #808080;color:black;\\\" #mySelect  (ionChange)=\\\"selectChanged(mySelect.value)\\\">\\r\\n        <ion-select-option><label>Everyone</label></ion-select-option>\\r\\n        <div *ngFor=\\\"let recipient of listRecipient\\\">\\r\\n        <ion-select-option value=\\\"{{recipient.user_Id}}\\\" *ngIf=\\\"recipient.user_Id!=this.studentid&&this.noofparticipant!=1\\\"><label>{{ recipient.user_Username }}</label></ion-select-option>\\r\\n      </div>\\r\\n      </ion-select>\\r\\n    </ion-col>\\r\\n  <ion-col size=\\\"10\\\">\\r\\n  <textarea formControlName=\\\"chattext\\\" autosize maxRows=\\\"4\\\"  [(ngModel)]=\\\"chattext\\\" class=\\\"message-input\\\"></textarea>\\r\\n  </ion-col>\\r\\n  <ion-col size=\\\"2\\\" class=\\\"ion-align-self-center\\\">\\r\\n    <img style=\\\"width:2em;\\\" src=\\\"assets/images/user-interface.png\\\" (click)=\\\"SendMessage()\\\"><br/>\\r\\n  </ion-col>\\r\\n</ion-row>\\r\\n</form>\\r\\n</ion-toolbar>\\r\\n</ion-footer>\\r\\n\\r\\n\\r\\n\";","export default \".message {\\n  padding: 1em;\\n  border-radius: 1em;\\n  margin-bottom: 1em;\\n  white-space: pre-wrap;\\n}\\n\\n.other-message {\\n  background: #f0f0a7;\\n  color: #000000;\\n}\\n\\n.my-message {\\n  background: #d9f6ff;\\n  color: #000000;\\n}\\n\\n.time {\\n  color: #808080;\\n  float: right;\\n  font-size: small;\\n}\\n\\n.message-input {\\n  width: 100%;\\n  border: 0.1em solid var(--ion-color-medium);\\n  border-radius: 1em;\\n  resize: none;\\n  padding-left: 1em;\\n  padding-right: 1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2Vzc2lvbi1hc3NpZ25tZW50LWNoYXQvQzpcXFVzZXJzXFxMMzA5MDNcXERvY3VtZW50c1xcR2l0SHViXFxJb25pY0ZQQW5hbHlzaXMvc3JjXFxhcHBcXHBhZ2VzXFxzZXNzaW9uLWFzc2lnbm1lbnQtY2hhdFxcc2Vzc2lvbi1hc3NpZ25tZW50LWNoYXQucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9zZXNzaW9uLWFzc2lnbm1lbnQtY2hhdC9zZXNzaW9uLWFzc2lnbm1lbnQtY2hhdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLHFCQUFBO0FDQ0Y7O0FERUE7RUFDQyxtQkFBQTtFQUNBLGNBQUE7QUNDRDs7QURFQTtFQUNFLG1CQUFBO0VBQ0EsY0FBQTtBQ0NGOztBREVBO0VBQ0MsY0FBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtBQ0NEOztBREVBO0VBQ0UsV0FBQTtFQUNBLDJDQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvc2Vzc2lvbi1hc3NpZ25tZW50LWNoYXQvc2Vzc2lvbi1hc3NpZ25tZW50LWNoYXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1lc3NhZ2Uge1xyXG4gIHBhZGRpbmc6IDFlbTtcclxuICBib3JkZXItcmFkaXVzOiAxZW07XHJcbiAgbWFyZ2luLWJvdHRvbTogMWVtO1xyXG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcclxufVxyXG5cclxuLm90aGVyLW1lc3NhZ2Uge1xyXG4gYmFja2dyb3VuZDogI2YwZjBhNztcclxuIGNvbG9yOiAjMDAwMDAwO1xyXG59XHJcblxyXG4ubXktbWVzc2FnZSB7XHJcbiAgYmFja2dyb3VuZDogI2Q5ZjZmZjtcclxuICBjb2xvcjogIzAwMDAwMDtcclxufVxyXG5cclxuLnRpbWUge1xyXG4gY29sb3I6ICM4MDgwODA7XHJcbiBmbG9hdDogcmlnaHQ7XHJcbiBmb250LXNpemU6IHNtYWxsO1xyXG59XHJcblxyXG4ubWVzc2FnZS1pbnB1dCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgYm9yZGVyOiAwLjFlbSBzb2xpZCB2YXIoLS1pb24tY29sb3ItbWVkaXVtKTtcclxuICBib3JkZXItcmFkaXVzOiAxZW07XHJcbiAgcmVzaXplOiBub25lO1xyXG4gIHBhZGRpbmctbGVmdDogMWVtO1xyXG4gIHBhZGRpbmctcmlnaHQ6IDFlbTtcclxufSIsIi5tZXNzYWdlIHtcbiAgcGFkZGluZzogMWVtO1xuICBib3JkZXItcmFkaXVzOiAxZW07XG4gIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xufVxuXG4ub3RoZXItbWVzc2FnZSB7XG4gIGJhY2tncm91bmQ6ICNmMGYwYTc7XG4gIGNvbG9yOiAjMDAwMDAwO1xufVxuXG4ubXktbWVzc2FnZSB7XG4gIGJhY2tncm91bmQ6ICNkOWY2ZmY7XG4gIGNvbG9yOiAjMDAwMDAwO1xufVxuXG4udGltZSB7XG4gIGNvbG9yOiAjODA4MDgwO1xuICBmbG9hdDogcmlnaHQ7XG4gIGZvbnQtc2l6ZTogc21hbGw7XG59XG5cbi5tZXNzYWdlLWlucHV0IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGJvcmRlcjogMC4xZW0gc29saWQgdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gIGJvcmRlci1yYWRpdXM6IDFlbTtcbiAgcmVzaXplOiBub25lO1xuICBwYWRkaW5nLWxlZnQ6IDFlbTtcbiAgcGFkZGluZy1yaWdodDogMWVtO1xufSJdfQ== */\";","import { Component,ViewChild,OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport {NetworkService} from '../../services/network.service';\r\nimport {ChatService} from '../../services/chat.service';\r\nimport { HTTP } from '@ionic-native/http/ngx';\r\nimport { AssignmentsService } from '../../services/assignments.service';\r\nimport {SessionStatus,apiurl} from '../../model/global-api';\r\nimport { Storage } from '@ionic/storage';\r\nimport {  GlobalService} from '../../services/global.service';\r\n@Component({\r\n  selector: 'app-session-assignment-chat',\r\n  templateUrl: './session-assignment-chat.page.html',\r\n  styleUrls: ['./session-assignment-chat.page.scss'],\r\n})\r\nexport class SessionAssignmentChatPage implements OnInit {\r\n  constructor(private globalService: GlobalService,private nativeHttp:HTTP,private storage:Storage,private assignmentsService: AssignmentsService,private activatedRoute: ActivatedRoute, public formBuilder: FormBuilder, private modalController:ModalController,private networkService:NetworkService,private chatService:ChatService) {\r\n    this.createchatForm = formBuilder.group({\r\n      recipientname: [''],\r\n      chattext: ['', Validators.required]\r\n  });\r\n  }\r\n  \r\n  @ViewChild('content') content: any;\r\n  public recipients: Array<string>;\r\n  public currentRecipient: string;\r\n sessionstatus:any;sessionstatusended:any;asgmid:any;chatIRecived:any;\r\n //Form \r\n public createchatForm: FormGroup;recipientname:any;chattext:any;listRecipient:any;noofparticipant:any;\r\n\r\n //User Info\r\n token:any;studentid:any;\r\n  ngOnInit(){\r\n    this.currentRecipient = \"Everyone\";\r\n    this.recipientname=\"Everyone\";\r\n  }\r\n  ionViewWillEnter(): void {\r\n    this.token=this.globalService.getselectedtoken() //Get Token\r\n    this.studentid=this.globalService.getselectedStudentId()//Get Tutor\r\n    this.sessionstatusended=SessionStatus.SESSION_STATUS_ENDED;\r\n    this.APIRetrieveChatInAssignment();//Retrive Chats\r\n    this.CallAPIListOfRecipient();//Receive Participant in Session\r\n    this.sessionstatus=this.assignmentsService.getselectedsessionstatus();//Get Session Status\r\n   setTimeout(() => {\r\n      this.content.scrollToBottom(300);\r\n  }, 2000);\r\n  \r\n}\r\n    //Close Chat\r\n    DismissModal(){\r\n      this.modalController.dismiss();\r\n    }\r\n    //Change of selected recipient\r\n    selectChanged(selectrecipient) {\r\n      this.currentRecipient = selectrecipient;\r\n      this.recipientname = selectrecipient;\r\n     // console.log(this.recipientname)\r\n     }\r\n    SendMessage(){\r\n      if(this.networkService.online == false )\r\n      {\r\n        this.networkService.presentNetworkMsg(); \r\n      }\r\n      else{\r\n      if(this.createchatForm.valid)\r\n      {\r\n        //POST METHOD\r\n       // console.log(this.recipientname)\r\n       // console.log(this.chattext)\r\n        this.APISendChatInAssignment() //Send Message\r\n         this.chattext=\"\";\r\n      }\r\n      }\r\n    }\r\n    /*POST METHOD*/\r\n APIRetrieveChatInAssignment()\r\n {\r\n   this.asgmid=this.assignmentsService.getselectedasgmtid()\r\n  this.nativeHttp.setDataSerializer('json');\r\n   this.nativeHttp.post(apiurl.apiUrl+'chat/retrieve', {\r\n    \"Authentication_Token\":this.token, //Get from storage \r\n   \"Asgmt_Id\":this.asgmid,\r\n   \"User_Id\": this.studentid,//Get from storage \r\n}, {\r\n  'Accept': 'application/json',\r\n  'Content-Type': 'application/json' })\r\n  .then(response => {\r\n    try {\r\n      response.data = JSON.parse(response.data);\r\n      this.storage.set('chatdetails', response.data); \r\n      console.log(response.data)\r\n      this.storage.get('chatdetails').then((val) => {\r\n        this.chatIRecived=val;\r\n        });\r\n    } catch(e) {\r\n      console.error(e);\r\n      this.modalController.dismiss();\r\n      this.assignmentsService.presentError()\r\n    }\r\n })\r\n .catch(response => {\r\n   // prints 403\r\n  console.log(response.status);\r\n\r\n   // prints Permission denied\r\n  console.log(response.error);\r\n  this.modalController.dismiss();\r\n  this.assignmentsService.presentError()\r\n\r\n });\r\n }\r\n   /*POST METHOD*/\r\n   APISendChatInAssignment()\r\n   {\r\n     this.asgmid=this.assignmentsService.getselectedasgmtid()//Get Assignment Id\r\n    this.nativeHttp.setDataSerializer('json');\r\n     this.nativeHttp.post(apiurl.apiUrl+'chat/send', {\r\n    \"Authentication_Token\":this.token, //Get from storage \r\n     \"Asgmt_Id\":this.asgmid,\r\n     \"Sender\":this.studentid,\r\n     \"Recipient\":this.recipientname,\r\n     \"Chat_Value\":this.chattext\r\n  }, {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json' })\r\n    .then(response => {\r\n      try {\r\n       response.data = JSON.parse(response.data);\r\n       // this.APIRetrieveChatInAssignment();\r\n        setInterval(() => { \r\n          this.APIRetrieveChatInAssignment(); // Now the \"this\" still references the component\r\n       }, 500);//half a second\r\n       this.content.scrollToBottom();\r\n     \r\n      } catch(e) {\r\n        console.error(e);\r\n        this.assignmentsService.presentErrorchat()\r\n      }\r\n   })\r\n   .catch(response => {\r\n     // prints 403\r\n    console.log(response.status);\r\n  \r\n     // prints Permission denied\r\n    console.log(response.error);\r\n    this.assignmentsService.presentErrorchat()\r\n   });\r\n   }\r\n  /*Call APIListRecipient METHOD*/\r\n   CallAPIListOfRecipient(){\r\n    this.asgmid=this.assignmentsService.getselectedasgmtid() //Get asgmt id\r\n    this.nativeHttp.setDataSerializer('json');\r\n    this.nativeHttp.post(apiurl.apiUrl+'chat/listRecipient', {\r\n   \"Authentication_Token\":this.token, //Get from storage \r\n    \"Asgmt_Id\":this.asgmid,\r\n    \"User_Id\": this.studentid,\r\n }, {\r\n   'Accept': 'application/json',\r\n   'Content-Type': 'application/json' })\r\n   .then(response => {\r\n     try {\r\n       response.data = JSON.parse(response.data);\r\n       //console.log(response.data)\r\n       this.listRecipient=response.data;\r\n       this.noofparticipant=this.listRecipient.length;\r\n     } catch(e) {\r\n       console.error(e);\r\n       this.modalController.dismiss();\r\n       this.assignmentsService.presentError()\r\n     }\r\n  })\r\n  .catch(response => {\r\n    // prints 403\r\n   console.log(response.status);\r\n \r\n    // prints Permission denied\r\n   console.log(response.error);\r\n   this.modalController.dismiss();\r\n   this.assignmentsService.presentError() \r\n   });\r\n   }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {ToastController,AlertController,LoadingController } from '@ionic/angular';\r\nimport { HTTP } from '@ionic-native/http/ngx';\r\nimport { Storage } from '@ionic/storage';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatService {\r\n\r\nconstructor(private nativeHttp:HTTP,private toastCtrl: ToastController,private alertController:AlertController,public loadingController: LoadingController,private storage:Storage) {}\r\n\r\n public data:any;\r\n  //Pop-up message\r\nasync presentToastWithOptions(text) {\r\n  const toast = await this.toastCtrl.create({\r\n    header: text,\r\n    duration: 3000,\r\n    position: 'bottom',\r\n    buttons: [{\r\n      text: 'CLOSE',\r\n      role: 'cancel'\r\n    }],\r\n    cssClass: 'toastCSS'\r\n  });\r\n  toast.present();\r\n}\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}