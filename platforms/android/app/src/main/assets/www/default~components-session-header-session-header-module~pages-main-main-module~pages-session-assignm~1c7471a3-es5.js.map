{"version":3,"sources":["webpack:///src/app/pages/shared-module/popover-participant-invite/popover-participant-invite.page.html","webpack:///src/app/pages/shared-module/popover-participant-invite/popover-participant-invite.page.scss","webpack:///src/app/pages/shared-module/popover-participant-invite/popover-participant-invite.page.ts"],"names":["PopoverParticipantInvitePage","globalService","nativeHttp","router","assignmentsService","storage","popoverController","data","searchParticipant","countaddedparticipant","displayaddedparticipants","token","getselectedtoken","studentid","getselectedStudentId","CallAPISearchStudentsToInvite","sessionid","getselectedsessionid","setDataSerializer","post","apiUrl","then","response","console","log","JSON","parse","textdisplayparticipant","e","error","presentError","setTimeout","closePopover","navigateByUrl","status","dismiss","participant","toBeInvited","invitedfriends","push","stringify","presentLoading","set","assignments","dismissLoading","selector","template"],"mappings":"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","file":"default~components-session-header-session-header-module~pages-main-main-module~pages-session-assignm~1c7471a3-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <h2 class=\\\"title\\\" style=\\\"font-size: large;padding:2%;\\\"><b>Invite Friends</b><ion-icon style=\\\"float: right;\\\" src=\\\"assets/images/pop-up-cross.svg\\\" (click)=\\\"closePopover()\\\"></ion-icon> </h2>\\r\\n</ion-header>\\r\\n<div style=\\\"display: flex; justify-content: center;align-items: center;padding:2%\\\">{{displayaddedparticipants}}</div>\\r\\n<div style=\\\"display: flex; justify-content: center;align-items: center;\\\"><button class=\\\"popoverinvitebutton\\\" (click)=\\\"invitefriends()\\\"><b>Invite Friend</b></button></div>\\r\\n<ion-content>\\r\\n  \\r\\n  <h2 class=\\\"title\\\"><ion-searchbar [(ngModel)]=\\\"searchParticipant\\\" animated=\\\"true\\\"></ion-searchbar></h2>\\r\\n   <div class=\\\"container\\\" *ngFor=\\\"let participant of textdisplayparticipant| filter:searchParticipant\\\">\\r\\n      <div class=\\\"popovercss\\\" *ngIf=\\\"participant.toBeInvited==='N'\\\">\\r\\n       ({{participant.levelInfo_DisplayName}}) <b>{{participant.username}}</b><label (click) = \\\"AddParticipant(participant)\\\" *ngIf=\\\"participant.toBeInvited==='N'\\\" class=\\\"popoveraddlabel\\\">Add</label>\\r\\n      </div> \\r\\n    </div>\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n\";","export default \".container {\\n  padding: 0 4% 0 4%;\\n}\\n\\nion-toolbar {\\n  --min-height:0px!important;\\n}\\n\\n.popoverinvitebutton {\\n  border: solid 0.1em black;\\n  color: white;\\n  background-color: #1c91a8;\\n  display: block;\\n  margin: 0 auto;\\n  text-align: center;\\n  padding: 0.5em;\\n}\\n\\n.popoveraddlabel {\\n  color: black;\\n  float: right;\\n  padding: 0.1em;\\n}\\n\\n.popovercss {\\n  border: solid #000000;\\n  background-color: white;\\n  margin-bottom: 0.5em;\\n  padding: 0.3em;\\n}\\n\\n.popoveraddbutton {\\n  border: solid 0.1em black;\\n  color: white;\\n  background-color: #1c91a8;\\n  float: right;\\n  padding: 0.1em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvc2hhcmVkLW1vZHVsZS9wb3BvdmVyLXBhcnRpY2lwYW50LWludml0ZS9DOlxcVXNlcnNcXEwzMDkwM1xcRG9jdW1lbnRzXFxHaXRIdWJcXElvbmljRlBBbmFseXNpcy9zcmNcXGFwcFxccGFnZXNcXHNoYXJlZC1tb2R1bGVcXHBvcG92ZXItcGFydGljaXBhbnQtaW52aXRlXFxwb3BvdmVyLXBhcnRpY2lwYW50LWludml0ZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3NoYXJlZC1tb2R1bGUvcG9wb3Zlci1wYXJ0aWNpcGFudC1pbnZpdGUvcG9wb3Zlci1wYXJ0aWNpcGFudC1pbnZpdGUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7QUNDRjs7QURDRTtFQUNFLDBCQUFBO0FDRUo7O0FEQUU7RUFDRSx5QkFBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLGNBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0FDR0o7O0FEREE7RUFDRSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUNJRjs7QURGQTtFQUNFLHFCQUFBO0VBQ0EsdUJBQUE7RUFDQSxvQkFBQTtFQUNBLGNBQUE7QUNLRjs7QURIQTtFQUNFLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUNNRiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3NoYXJlZC1tb2R1bGUvcG9wb3Zlci1wYXJ0aWNpcGFudC1pbnZpdGUvcG9wb3Zlci1wYXJ0aWNpcGFudC1pbnZpdGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lcntcclxuICBwYWRkaW5nOiAwIDQlIDAgNCU7XHJcbn1cclxuICBpb24tdG9vbGJhcntcclxuICAgIC0tbWluLWhlaWdodDowcHghaW1wb3J0YW50O1xyXG4gIH1cclxuICAucG9wb3Zlcmludml0ZWJ1dHRvbntcclxuICAgIGJvcmRlcjpzb2xpZCAwLjFlbSBibGFjaztcclxuICAgIGNvbG9yOndoaXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjojMWM5MWE4O1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICBtYXJnaW46IDAgYXV0bztcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHBhZGRpbmc6IDAuNWVtO1xyXG4gIH1cclxuLnBvcG92ZXJhZGRsYWJlbHtcclxuICBjb2xvcjpibGFjaztcclxuICBmbG9hdDogcmlnaHQ7XHJcbiAgcGFkZGluZzowLjFlbTtcclxufVxyXG4ucG9wb3ZlcmNzc3tcclxuICBib3JkZXI6c29saWQgIzAwMDAwMDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW4tYm90dG9tOjAuNWVtO1xyXG4gIHBhZGRpbmc6MC4zZW07XHJcbn1cclxuLnBvcG92ZXJhZGRidXR0b257XHJcbiAgYm9yZGVyOnNvbGlkIDAuMWVtIGJsYWNrO1xyXG4gIGNvbG9yOndoaXRlO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IzFjOTFhODtcclxuICBmbG9hdDogcmlnaHQ7XHJcbiAgcGFkZGluZzowLjFlbTtcclxufSIsIi5jb250YWluZXIge1xuICBwYWRkaW5nOiAwIDQlIDAgNCU7XG59XG5cbmlvbi10b29sYmFyIHtcbiAgLS1taW4taGVpZ2h0OjBweCFpbXBvcnRhbnQ7XG59XG5cbi5wb3BvdmVyaW52aXRlYnV0dG9uIHtcbiAgYm9yZGVyOiBzb2xpZCAwLjFlbSBibGFjaztcbiAgY29sb3I6IHdoaXRlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWM5MWE4O1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luOiAwIGF1dG87XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMC41ZW07XG59XG5cbi5wb3BvdmVyYWRkbGFiZWwge1xuICBjb2xvcjogYmxhY2s7XG4gIGZsb2F0OiByaWdodDtcbiAgcGFkZGluZzogMC4xZW07XG59XG5cbi5wb3BvdmVyY3NzIHtcbiAgYm9yZGVyOiBzb2xpZCAjMDAwMDAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgbWFyZ2luLWJvdHRvbTogMC41ZW07XG4gIHBhZGRpbmc6IDAuM2VtO1xufVxuXG4ucG9wb3ZlcmFkZGJ1dHRvbiB7XG4gIGJvcmRlcjogc29saWQgMC4xZW0gYmxhY2s7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzFjOTFhODtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBwYWRkaW5nOiAwLjFlbTtcbn0iXX0= */\";","import { Component, OnInit,ViewChild } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\nimport {PopoverController,IonInfiniteScroll } from '@ionic/angular';\r\nimport { AssignmentsService } from '../../../services/assignments.service';\r\nimport { HTTP } from '@ionic-native/http/ngx';\r\nimport {apiurl} from '../../../model/global-api';\r\nimport {  GlobalService} from '../../../services/global.service';\r\nimport { Router } from '@angular/router';\r\n@Component({\r\n  selector: 'app-popover-participant-invite',\r\n  templateUrl: './popover-participant-invite.page.html',\r\n  styleUrls: ['./popover-participant-invite.page.scss'],\r\n})\r\nexport class PopoverParticipantInvitePage implements OnInit {\r\n  countaddedparticipant: number;  data = []; sessionid:any;searchParticipant=\"\";\r\n  textdisplayparticipant:any;displayaddedparticipants:any;invitedfriends:any;\r\n//UserInfo\r\ntoken:any;studentid:any;\r\n  constructor(private globalService: GlobalService,private nativeHttp:HTTP,private router:Router,private assignmentsService: AssignmentsService,private storage:Storage,private popoverController:PopoverController ) {\r\n    this.countaddedparticipant = 0;\r\n    this.displayaddedparticipants=this.countaddedparticipant+\" Student(s) added\";\r\n   }\r\n  \r\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\r\n\r\n  ngOnInit() {}\r\n  ionViewWillEnter(){\r\n    this.token=this.globalService.getselectedtoken()\r\n  this.studentid=this.globalService.getselectedStudentId()\r\n    this.CallAPISearchStudentsToInvite();\r\n  }\r\n  /*Get Search Students to Invite*/\r\nCallAPISearchStudentsToInvite()\r\n{\r\n  this.sessionid=this.assignmentsService.getselectedsessionid();\r\n this.nativeHttp.setDataSerializer('json');\r\n  this.nativeHttp.post(apiurl.apiUrl+'session/searchStudents2Invite', {\r\n    \"Authentication_Token\":this.token, //Get from storage \r\n   \"Student_Id\":this.studentid,\r\n  \"Session_Id\":this.sessionid,\r\n}, {\r\n 'Accept': 'application/json',\r\n 'Content-Type': 'application/json' })\r\n .then(response => {\r\n   try {\r\n    console.log('this is response data',response)\r\n     response.data = JSON.parse(response.data);\r\n     this.textdisplayparticipant=response.data;\r\n   } catch(e) {\r\n     console.error('JSON parsing error plaese be patient');\r\n     this.assignmentsService.presentError()\r\n     setTimeout(() => {\r\n       this.closePopover();\r\n       this.router.navigateByUrl('tabs/main'); \r\n    \r\n   \r\n     }, 3000);   \r\n    }\r\n})\r\n.catch(response => {\r\n  // prints 403\r\n  console.log(response.status);\r\n\r\n  // prints Permission denied\r\n  console.log(response.error);\r\n  this.assignmentsService.presentError()\r\n  setTimeout(() => {\r\n    this.closePopover();\r\n    this.router.navigateByUrl('tabs/main'); \r\n \r\n\r\n  }, 3000);  \r\n});\r\n}\r\n  closePopover(){\r\n    this.popoverController.dismiss();\r\n  }\r\n  AddParticipant(participant){\r\n    this.countaddedparticipant++;\r\n    this.displayaddedparticipants=this.countaddedparticipant+\" Student(s) added\";\r\n    participant.toBeInvited = participant.toBeInvited == 'N' ? 'Y' : 'N';\r\n    this.invitedfriends=participant;\r\n    this.data.push(this.invitedfriends);\r\n  }\r\n \r\n  invitefriends(){\r\n    //console.log(this.data)-->Add more than  a student at a time\r\n    this.nativeHttp.setDataSerializer('json');\r\n    this.nativeHttp.post(apiurl.apiUrl+'session/participant_invite', {\r\n      \"Authentication_Token\":this.token, //Get from storage \r\n    \"Owner_Id\":this.studentid,\r\n    \"Session_Id\": this.sessionid,\r\n    \"StudentList\":JSON.stringify(this.data)\r\n }, {\r\n   'Accept': 'application/json',\r\n   'Content-Type': 'application/json' })\r\n   .then(response => {\r\n    this.assignmentsService.presentLoading()\r\n     try {\r\n       response.data = JSON.parse(response.data);\r\n       //console.log(response.data)\r\n      this.storage.set('mysession', response.data); \r\n       this.storage.set('assignmentdetails',response.data.assignments);\r\n       this.assignmentsService.dismissLoading()\r\n       this.popoverController.dismiss();\r\n     } catch(e) {\r\n       console.error('JSON parsing error');\r\n       this.assignmentsService.presentError()\r\n       setTimeout(() => {\r\n         this.closePopover();\r\n         this.assignmentsService.dismissLoading()\r\n         this.router.navigateByUrl('tabs/main'); \r\n      \r\n     \r\n       }, 3000);  \r\n} \r\n  })\r\n  .catch(response => {\r\n    // prints 403\r\n   console.log(response.status);\r\n    // prints Permission denied\r\n   console.log(response.error);\r\n   this.assignmentsService.presentError()\r\n   setTimeout(() => {\r\n     this.closePopover();\r\n     this.assignmentsService.dismissLoading()\r\n     this.router.navigateByUrl('tabs/main'); \r\n  \r\n \r\n   }, 3000); \r\n  });\r\n  }\r\n  }"]}